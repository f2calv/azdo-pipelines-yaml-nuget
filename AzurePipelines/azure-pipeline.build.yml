jobs:
- job: BuildJob
  pool:
    vmImage: $(vmImage)
  steps:
  
  - task: DotNetCoreCLI@2
    displayName: dotnet restore script
    inputs:
      command: 'restore'
      #projects: '$(SolutionName).sln'
      projects: |
        **/$(ProjectName).csproj
        **/$(ProjectName).Tests.csproj
  
  - task: DotNetCoreCLI@2
    displayName: dotnet build
    inputs:
      command: build
      #projects: '$(SolutionName).sln'
      projects: |
        **/$(ProjectName).csproj
        **/$(ProjectName).Tests.csproj
      arguments: '--configuration $(buildConfiguration)'

#todo: add in dotnet publish - handy for apps using portable framework and other types of deployment
  - task: PublishPipelineArtifact@1
    inputs:
      artifactName: drop
      #targetPath: 
  #- publish: $(System.DefaultWorkingDirectory)/bin/WebApp
  #  artifact: bin/WebApp