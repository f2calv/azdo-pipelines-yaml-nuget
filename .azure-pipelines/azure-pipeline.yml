parameters:
- name: BuildConfiguration
  displayName: Select BuildConfiguration
  type: string
  default: release
  values:
  - release
  - debug

trigger:
  branches:
    include:
    - master
    - hotfix/*
    - feature/*
  paths:
    exclude:
    - .azure-pipelines
    - LICENSE
    - README.md

resources:
  repositories:
  - repository: sharedTemplates
    type: github
    name: f2calv/CasCap.YAMLTemplates
    endpoint: github.com_f2calv

variables:
- ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/master') }}:
  - group: nuget-prod
- ${{ if ne(variables['Build.SourceBranch'], 'refs/heads/master') }}:
  - group: nuget-dev

pool:
  vmImage: windows-latest #require windows agent because we have a .NET Framework target

steps:
- template: templates/steps.dotnet.publish.nuget-v3.yml@sharedTemplates
  parameters:
    BuildConfiguration: ${{ parameters.BuildConfiguration }}
    gitHubConnection: github.com_f2calv