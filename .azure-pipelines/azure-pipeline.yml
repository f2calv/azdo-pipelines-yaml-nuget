parameters:
- name: BuildConfiguration
  displayName: Select BuildConfiguration
  type: string
  default: release
  values:
  - release
  - debug

trigger:
  branches:
    include:
    - master
    - hotfix
    - feature
  paths:
    include:
    - .azure-pipelines
    - MyPkgLib
    - MyPkgLib.Tests
    exclude:
    - README.md

variables:
- ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/master') }}:
  - group: nuget-prod
- ${{ if ne(variables['Build.SourceBranch'], 'refs/heads/master') }}:
  - group: nuget-dev

pool:
  vmImage: windows-latest #require windows agent because we have a .NET Framework target

steps:
- template: steps.yml
  parameters:
    BuildConfiguration: ${{ parameters.BuildConfiguration }}